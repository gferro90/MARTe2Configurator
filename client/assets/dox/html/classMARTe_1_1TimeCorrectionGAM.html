<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MARTe2-components: MARTe::TimeCorrectionGAM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MARTe2-components
   </div>
   <div id="projectbrief">C++ real-time application development framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>MARTe</b></li><li class="navelem"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html">TimeCorrectionGAM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classMARTe_1_1TimeCorrectionGAM-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MARTe::TimeCorrectionGAM Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>GAM which allows to estimate the next time-stamp value in a continuous time stream.  
 <a href="classMARTe_1_1TimeCorrectionGAM.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="TimeCorrectionGAM_8h_source.html">TimeCorrectionGAM.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MARTe::TimeCorrectionGAM:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMARTe_1_1TimeCorrectionGAM.png" usemap="#MARTe::TimeCorrectionGAM_map" alt=""/>
  <map id="MARTe::TimeCorrectionGAM_map" name="MARTe::TimeCorrectionGAM_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8be3b4ec0368152e0ffb757ba0bc2c6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a8be3b4ec0368152e0ffb757ba0bc2c6f">TimeCorrectionGAM</a> ()</td></tr>
<tr class="memdesc:a8be3b4ec0368152e0ffb757ba0bc2c6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a8be3b4ec0368152e0ffb757ba0bc2c6f">More...</a><br /></td></tr>
<tr class="separator:a8be3b4ec0368152e0ffb757ba0bc2c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523ccc1c6db2547ff905a46965ab4029"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a523ccc1c6db2547ff905a46965ab4029"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a523ccc1c6db2547ff905a46965ab4029">~TimeCorrectionGAM</a> ()</td></tr>
<tr class="memdesc:a523ccc1c6db2547ff905a46965ab4029"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a523ccc1c6db2547ff905a46965ab4029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c05f24a63ae997ecaf825c11b06385e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a1c05f24a63ae997ecaf825c11b06385e">Initialise</a> (StructuredDataI &amp;data)</td></tr>
<tr class="separator:a1c05f24a63ae997ecaf825c11b06385e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca319fdd360ed82a3bd786d86374750b"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#aca319fdd360ed82a3bd786d86374750b">Setup</a> ()</td></tr>
<tr class="memdesc:aca319fdd360ed82a3bd786d86374750b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the input signal (acquired time-stamp) is unique, scalar and if it is uint64 type. Checks that the first output signal (corrected time-stamp) is scalar and uint64 type and that the second signal (is corrected flag) is scalar and uint8 type.  <a href="#aca319fdd360ed82a3bd786d86374750b">More...</a><br /></td></tr>
<tr class="separator:aca319fdd360ed82a3bd786d86374750b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab954bc0d017a32681a470ad6455f879e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#ab954bc0d017a32681a470ad6455f879e">Execute</a> ()</td></tr>
<tr class="memdesc:ab954bc0d017a32681a470ad6455f879e"><td class="mdescLeft">&#160;</td><td class="mdescRight">If necessary, corrects the input time-stamp.  <a href="#ab954bc0d017a32681a470ad6455f879e">More...</a><br /></td></tr>
<tr class="separator:ab954bc0d017a32681a470ad6455f879e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a613763c754f07903466eb817ded1e81c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a613763c754f07903466eb817ded1e81c"></a>
uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a613763c754f07903466eb817ded1e81c">expectedDelta</a></td></tr>
<tr class="memdesc:a613763c754f07903466eb817ded1e81c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The expected delta difference between two consecutive time-stamps in input. <br /></td></tr>
<tr class="separator:a613763c754f07903466eb817ded1e81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa145371b750b3d748d39dafbf47662ee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa145371b750b3d748d39dafbf47662ee"></a>
uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#aa145371b750b3d748d39dafbf47662ee">deltaTolerance</a></td></tr>
<tr class="memdesc:aa145371b750b3d748d39dafbf47662ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">The admissible delta tolerance. <br /></td></tr>
<tr class="separator:aa145371b750b3d748d39dafbf47662ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6998c24e90cba0b9f64e7b2d52a22f6f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6998c24e90cba0b9f64e7b2d52a22f6f"></a>
float32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a6998c24e90cba0b9f64e7b2d52a22f6f">filterGain</a></td></tr>
<tr class="memdesc:a6998c24e90cba0b9f64e7b2d52a22f6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The gain of the first order filter used to compute the delta estimation. <br /></td></tr>
<tr class="separator:a6998c24e90cba0b9f64e7b2d52a22f6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac76952fb2ef1b41adb607cc9c94fb1c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aac76952fb2ef1b41adb607cc9c94fb1c"></a>
float64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#aac76952fb2ef1b41adb607cc9c94fb1c">estimatedDelta</a></td></tr>
<tr class="memdesc:aac76952fb2ef1b41adb607cc9c94fb1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The estimation of delta. <br /></td></tr>
<tr class="separator:aac76952fb2ef1b41adb607cc9c94fb1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0daa8cf0541b811b431084bac5856ae5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0daa8cf0541b811b431084bac5856ae5"></a>
uint64 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a0daa8cf0541b811b431084bac5856ae5">inputTime</a></td></tr>
<tr class="memdesc:a0daa8cf0541b811b431084bac5856ae5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accelerator to the memory of the input time-stamp signal. <br /></td></tr>
<tr class="separator:a0daa8cf0541b811b431084bac5856ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2969ba872240c84eeada12a14848f5a0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2969ba872240c84eeada12a14848f5a0"></a>
uint64 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a2969ba872240c84eeada12a14848f5a0">correctedTime</a></td></tr>
<tr class="memdesc:a2969ba872240c84eeada12a14848f5a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accelerator to the memory of the output time-stamo corrected signal. <br /></td></tr>
<tr class="separator:a2969ba872240c84eeada12a14848f5a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694c3c67edf862b7dcc4adfe6113b94c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a694c3c67edf862b7dcc4adfe6113b94c"></a>
uint8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a694c3c67edf862b7dcc4adfe6113b94c">corrected</a></td></tr>
<tr class="memdesc:a694c3c67edf862b7dcc4adfe6113b94c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accelerator to the memory of the output "is corrected" flag. <br /></td></tr>
<tr class="separator:a694c3c67edf862b7dcc4adfe6113b94c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a153a123dd500bc4e6006ed35c6a6309c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a153a123dd500bc4e6006ed35c6a6309c"></a>
uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a153a123dd500bc4e6006ed35c6a6309c">lastValidTime</a></td></tr>
<tr class="memdesc:a153a123dd500bc4e6006ed35c6a6309c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to store the last time-stamp output. <br /></td></tr>
<tr class="separator:a153a123dd500bc4e6006ed35c6a6309c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43093e3bf29dd89be22f8e737480d4f9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43093e3bf29dd89be22f8e737480d4f9"></a>
uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TimeCorrectionGAM.html#a43093e3bf29dd89be22f8e737480d4f9">iterationCounter</a></td></tr>
<tr class="memdesc:a43093e3bf29dd89be22f8e737480d4f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to store the first time-stamp (delta cannot be computed at the first cycle) <br /></td></tr>
<tr class="separator:a43093e3bf29dd89be22f8e737480d4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>GAM which allows to estimate the next time-stamp value in a continuous time stream. </p>
<p>In systems that are expected to produce a continuous time stream at fixed frequency, this GAM can be used to handle situations where a given point in time is missing (e.g. the time variation between two consecutive cycles is not the expected period).</p>
<p>The user must configure the expected time difference (delta) between two consecutive acquired time-stamps, together with the maximum allowed delta tolerance. If the delta is in the admissible range, it is used to compute an estimation that will later be used when invalid time-stamps are detected (i.e when the delta is out of the admissible range). The estimation is computed with a first order filter:<br />
 delta_estimated=(1-filter_gain)*delta_estimated+filter_gain*delta<br />
with <em>filter_gain</em> to be configured by the user as a value between 0 and 1. Values of the gain which are closer to one will force the the filter to quickly follow the current delta values, otherwise, if the gain is close to zero, the filter will have has a slower dynamic and weight previous estimations of delta.</p>
<p>When a wrong time-stamp is detected, the output corrected time-stamp is computed as:<br />
 timestamp_out=last_valid_timestamp+delta_estimated<br />
 If the input time-stamp is valid (namely it belongs to the range defined by the user in the configuration), the time-stamp is exactly copied to the output and the delta difference with the previous time-stamp is used to compute the estimation of the delta.</p>
<p>This GAM accepts only one uint64 as the input signal, containing the acquired time-stamp. In the output, the first uint64 signal must be the corrected time-stamp and, optionally, a uint8 signal can be used to check if the GAM has corrected (=1) or not (=0) the time_stamp in the current cycle.</p>
<p>The configuration syntax is (names and signal quantity are only given as an example): </p><pre>
+TimeCorrectionGAM_0 = {
    Class = TimeCorrectionGAMTestGAM
    ExpectedDelta=1000000 //Between two cycle the InputTime difference shall be 1000000
    DeltaTolerance=20 //With a maximum absolute error of 20
    FilterGain=0.1 //The following gain will be used to compute the delta to be used when the difference between two time-stamps is greater than 20
    InputSignals = {
        InputTime = {
            DataSource = Drv1
            Type = uint64
            Frequency = 0
         }
     }
     OutputSignals = {
         CorrectedTime = {
             DataSource = DDB
             Type = uint64
         }
         IsCorrected = {
             DataSource = DDB
             Type = uint8
         }
     }
 }
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8be3b4ec0368152e0ffb757ba0bc2c6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MARTe::TimeCorrectionGAM::TimeCorrectionGAM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>Initialises the variables. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab954bc0d017a32681a470ad6455f879e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::TimeCorrectionGAM::Execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If necessary, corrects the input time-stamp. </p>
<p>If the input time-stamp is valid (namely it belongs to the range defined by the user in the configuration), the time-stamp is exactly copied to the output and the delta difference with the previous time-stamp is used to compute the estimation of the delta. If the time-stamp is wrong, the corrected time-stamp is computed as the last time-stamp output plus the estimated delta. </p><dl class="section return"><dt>Returns</dt><dd>true. </dd></dl>

</div>
</div>
<a class="anchor" id="a1c05f24a63ae997ecaf825c11b06385e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::TimeCorrectionGAM::Initialise </td>
          <td>(</td>
          <td class="paramtype">StructuredDataI &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd>GAM::Initialise</dd></dl>
<p>The user must configure the following parameters:<br />
 ExpectedDelta (uint64): the expected delta difference between two consecutive time-stamps<br />
 DeltaTolerance (uint64): defines the range in which an acquired time-stamp is considered valid and, hence, it will not be corrected. The range is [ExpectedDelta-DeltaTolerance, ExpectedDelta+DeltaTolerance].<br />
 FilterGain (float32): is the gain used in the first-order filter to compute the delta estimation that is used to correct the wrong time-stamps<br />
</p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>GAM::Initialise </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if all the parameters above are specified. </dd></dl>

</div>
</div>
<a class="anchor" id="aca319fdd360ed82a3bd786d86374750b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::TimeCorrectionGAM::Setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the input signal (acquired time-stamp) is unique, scalar and if it is uint64 type. Checks that the first output signal (corrected time-stamp) is scalar and uint64 type and that the second signal (is corrected flag) is scalar and uint8 type. </p>
<dl class="section see"><dt>See also</dt><dd>GAM::Setup </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if all the checks succeeds, false otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/pc/MARTe2Project/GIT/MARTe2-components/Source/Components/GAMs/TimeCorrectionGAM/<a class="el" href="TimeCorrectionGAM_8h_source.html">TimeCorrectionGAM.h</a></li>
<li>/home/pc/MARTe2Project/GIT/MARTe2-components/Source/Components/GAMs/TimeCorrectionGAM/<a class="el" href="TimeCorrectionGAM_8cpp.html">TimeCorrectionGAM.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
