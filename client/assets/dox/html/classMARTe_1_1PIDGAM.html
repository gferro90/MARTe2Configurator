<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MARTe2-components: MARTe::PIDGAM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MARTe2-components
   </div>
   <div id="projectbrief">C++ real-time application development framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>MARTe</b></li><li class="navelem"><a class="el" href="classMARTe_1_1PIDGAM.html">PIDGAM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classMARTe_1_1PIDGAM-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MARTe::PIDGAM Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>GAM which implement a generic PID with saturation and anti-windup.  
 <a href="classMARTe_1_1PIDGAM.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PIDGAM_8h_source.html">PIDGAM.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MARTe::PIDGAM:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMARTe_1_1PIDGAM.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae3b4f79a76ae6366821afae6224405b5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1PIDGAM.html#ae3b4f79a76ae6366821afae6224405b5">PIDGAM</a> ()</td></tr>
<tr class="memdesc:ae3b4f79a76ae6366821afae6224405b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="classMARTe_1_1PIDGAM.html#ae3b4f79a76ae6366821afae6224405b5">More...</a><br /></td></tr>
<tr class="separator:ae3b4f79a76ae6366821afae6224405b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff0cb32cee261512b4818ceb85cf8f60"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1PIDGAM.html#aff0cb32cee261512b4818ceb85cf8f60">~PIDGAM</a> ()</td></tr>
<tr class="memdesc:aff0cb32cee261512b4818ceb85cf8f60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="classMARTe_1_1PIDGAM.html#aff0cb32cee261512b4818ceb85cf8f60">More...</a><br /></td></tr>
<tr class="separator:aff0cb32cee261512b4818ceb85cf8f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c7f8470834f078a1a24c15c23fe5136"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1PIDGAM.html#a4c7f8470834f078a1a24c15c23fe5136">Initialise</a> (StructuredDataI &amp;data)</td></tr>
<tr class="memdesc:a4c7f8470834f078a1a24c15c23fe5136"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the parameters of the GAM according to the configuration file.  <a href="classMARTe_1_1PIDGAM.html#a4c7f8470834f078a1a24c15c23fe5136">More...</a><br /></td></tr>
<tr class="separator:a4c7f8470834f078a1a24c15c23fe5136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd9f7760ff71b56ee33d96642bf2af4d"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1PIDGAM.html#abd9f7760ff71b56ee33d96642bf2af4d">Setup</a> ()</td></tr>
<tr class="memdesc:abd9f7760ff71b56ee33d96642bf2af4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup the input/output variables.  <a href="classMARTe_1_1PIDGAM.html#abd9f7760ff71b56ee33d96642bf2af4d">More...</a><br /></td></tr>
<tr class="separator:abd9f7760ff71b56ee33d96642bf2af4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75fb407efbb2b878c78bbe8ae04e6f0c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1PIDGAM.html#a75fb407efbb2b878c78bbe8ae04e6f0c">Execute</a> ()</td></tr>
<tr class="memdesc:a75fb407efbb2b878c78bbe8ae04e6f0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the PID.  <a href="classMARTe_1_1PIDGAM.html#a75fb407efbb2b878c78bbe8ae04e6f0c">More...</a><br /></td></tr>
<tr class="separator:a75fb407efbb2b878c78bbe8ae04e6f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>GAM which implement a generic PID with saturation and anti-windup. </p>
<p>This GAM has two variants: single input or two inputs.<br  />
 When a single input is defined, the input of the GAM should be the error signal, computed subtracting the feedback (also called measurement) from the reference signal. The PID transfer function in the Z domain and using the backward Euler discretization method is: <br  />
 \( G_{PID} = kp + sampleTime * ki * z/(z - 1) + kd/sampleTime * (z-1)/z) \) <br  />
 where <br  />
 <b>kp</b> is the proportional constant<br  />
 <b>ki</b> is the integral constant<br  />
 <b>kd</b> is the derivative term<br  />
 <b>sampleTime</b> is the time between samples<br  />
 Hence, the differential equation implemented is: <br  />
 \( output = kp * error + ki * sampleTime * error + lastIntegral + kd/sampleTime * (error - lastError) \) <br  />
<br  />
 When two inputs are defined the behaviour is very similar as a single input. But before applying the PID, the GAM computes the error from the two inputs. The <b>order</b> <b>of</b> <b>the</b> <b>inputs</b> <b>is</b> <b>very</b> <b>import</b> for the correct functioning. The first input must be the reference and the second the measurement or (feedback). See below the configuration syntax for the proper input definition.</p>
<p><br  />
 The GAM also provides a saturation output and anti-windup function. When the output is saturated a flag is set to prevent the integral term from accumulating the error. In saturation mode the output is computed as follow:<br  />
 \( output = kp * error + ki * sampleTime * error + kd/sampleTime * (error - lastError) \) <br  />
 Notice that the lastIntegral is not added to the output.<br  />
</p>
<p>The configuration syntax is (names and signal quantity are only given as an example):</p>
<pre>
 +PID1 = {
     Class = <a class="el" href="classMARTe_1_1PIDGAM.html" title="GAM which implement a generic PID with saturation and anti-windup.">PIDGAM</a>
     kp = 10.0 // or kp or ki or kd must be defined, otherwise an error will occur
     ki = 1.0
     kd = 0.0
     sampleFrequency = 0.001
     maxOutput = 500.0 //optional
     minOutput = -500.0 //optional
     InputSignals = {
         Reference = {
             DataSource = "DDB1"
             Type = float64
             elements = 1
             samples = 1
             dimension = 1
         }
         Measurement = { //Notice that the measurement is the second signal.
             DataSource = "DDB2"
             Type = float64
             elements = 1
             samples = 1
             dimension = 1
         }
     }
     OutputSignals = {
         OutputSignal1 = {
             DataSource = "LCD"
             Type = float64
             elements = 1
             samples = 1
             dimension = 1
         }
     }
 }
 </pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae3b4f79a76ae6366821afae6224405b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3b4f79a76ae6366821afae6224405b5">&#9670;&nbsp;</a></span>PIDGAM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MARTe::PIDGAM::PIDGAM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<dl class="section post"><dt>Postcondition</dt><dd>kp = 0.0<br  />
proportional = 0.0<br  />
ki = 0.0<br  />
kid = 0.0<br  />
integral = 0.0<br  />
kd = 0.0<br  />
kdd = 0.0<br  />
derivative = 0.0<br  />
sampleTime = 0.0<br  />
maxOutput = MAX_FLOAT64<br  />
minOutput = -MAX_FLOAT64<br  />
enableIntegral = true<br  />
lastInput = 0.0<br  />
lastIntegral = 0.0 enableSubstraction = false<br  />
reference = NULL_PTR(float64 *)<br  />
sizeInputOutput = 0u<br  />
measurement = NULL_PTR(float64 *)<br  />
output = NULL_PTR(float64 *)<br  />
nOfInputSignals = 0u<br  />
nOfOutputSignals = 0u<br  />
numberOfInputElementsReference = 0u<br  />
numberOfInputElementsMeasurement = 0u<br  />
numberOfOutputElements = 0u<br  />
numberOfInputSamplesReference = 0u<br  />
numberOfInputSamplesMeasurement = 0u<br  />
numberOfOuputSamples = 0u<br  />
inputReferenceDimension = 0u<br  />
inputMeasurementDimension = 0u<br  />
outputDimension = 0u </dd></dl>

</div>
</div>
<a id="aff0cb32cee261512b4818ceb85cf8f60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff0cb32cee261512b4818ceb85cf8f60">&#9670;&nbsp;</a></span>~PIDGAM()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MARTe::PIDGAM::~PIDGAM </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default constructor. </p>
<dl class="section post"><dt>Postcondition</dt><dd>reference = NULL_PTR(float64 *)<br  />
measurement = NULL_PTR(float64 *)<br  />
output = NULL_PTR(float64 *)<br  />
</dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a75fb407efbb2b878c78bbe8ae04e6f0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75fb407efbb2b878c78bbe8ae04e6f0c">&#9670;&nbsp;</a></span>Execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::PIDGAM::Execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements the PID. </p>
<p>First computes the PID, then saturates the output if needed. If the output is saturated a flag prevents the integral term to continuing growing. </p><dl class="section return"><dt>Returns</dt><dd>true. </dd></dl>

</div>
</div>
<a id="a4c7f8470834f078a1a24c15c23fe5136"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c7f8470834f078a1a24c15c23fe5136">&#9670;&nbsp;</a></span>Initialise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::PIDGAM::Initialise </td>
          <td>(</td>
          <td class="paramtype">StructuredDataI &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise the parameters of the GAM according to the configuration file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>GAM configuration  Load the following parameters from a predefined configuration <br  />
kp<br  />
ki<br  />
kd<br  />
sampleTime<br  />
maxOutput (optional)<br  />
minOutput (optional)<br  />
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section post"><dt>Postcondition</dt><dd>kp != 0.0 || ki != 0.0 || kd != 0.0<br  />
sampleTime &gt; 0.0<br  />
maxOutpt &gt; minOutput<br  />
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if all postconditions are met </dd></dl>

</div>
</div>
<a id="abd9f7760ff71b56ee33d96642bf2af4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd9f7760ff71b56ee33d96642bf2af4d">&#9670;&nbsp;</a></span>Setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::PIDGAM::Setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Setup the input/output variables. </p>
<p>Initialise the input and output pointers and verify the number of elements, number of samples and dimension. Moreover, a flag is set to 1 if the error must be calculated internally. </p><dl class="section post"><dt>Postcondition</dt><dd>nOfInputSignals = 1 || nOfInputSignals = 2<br  />
nOfOutputSignals = 1<br  />
numberOfInputElementsReference = 1<br  />
numberOfInputElementsMeasurement = 1<br  />
numberOfOutputElements = 1<br  />
numberOfInputSamplesReference = 1<br  />
numberOfInputSamplesMeasurement = 1<br  />
numberOfOuputSamples = 1<br  />
inputReferenceDimension = 1<br  />
inputMeasurementDimension = 1<br  />
outputDimension = 1<br  />
reference != NULL<br  />
if enableSubstraction = true --&gt; measurement != NULL<br  />
output != NULL<br  />
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>true if all postconditions are met. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/codac-dev/MARTe2Project/GIT/MARTe2-components/Source/Components/GAMs/PIDGAM/<a class="el" href="PIDGAM_8h_source.html">PIDGAM.h</a></li>
<li>/home/codac-dev/MARTe2Project/GIT/MARTe2-components/Source/Components/GAMs/PIDGAM/<a class="el" href="PIDGAM_8cpp.html">PIDGAM.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
