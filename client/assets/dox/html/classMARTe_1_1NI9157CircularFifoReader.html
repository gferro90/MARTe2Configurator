<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MARTe2-components: MARTe::NI9157CircularFifoReader Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MARTe2-components
   </div>
   <div id="projectbrief">C++ real-time application development framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>MARTe</b></li><li class="navelem"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html">NI9157CircularFifoReader</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classMARTe_1_1NI9157CircularFifoReader-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MARTe::NI9157CircularFifoReader Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Circular buffer acquisition from NI-9157 FIFO.  
 <a href="classMARTe_1_1NI9157CircularFifoReader.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="NI9157CircularFifoReader_8h_source.html">NI9157CircularFifoReader.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MARTe::NI9157CircularFifoReader:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMARTe_1_1NI9157CircularFifoReader.png" usemap="#MARTe::NI9157CircularFifoReader_map" alt=""/>
  <map id="MARTe::NI9157CircularFifoReader_map" name="MARTe::NI9157CircularFifoReader_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9aa29c8b3fc12b5e40b495a4f2f5046b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a9aa29c8b3fc12b5e40b495a4f2f5046b">NI9157CircularFifoReader</a> ()</td></tr>
<tr class="memdesc:a9aa29c8b3fc12b5e40b495a4f2f5046b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a9aa29c8b3fc12b5e40b495a4f2f5046b">More...</a><br /></td></tr>
<tr class="separator:a9aa29c8b3fc12b5e40b495a4f2f5046b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5050d119d4d1373b3073bbb3637e19"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a7b5050d119d4d1373b3073bbb3637e19">~NI9157CircularFifoReader</a> ()</td></tr>
<tr class="memdesc:a7b5050d119d4d1373b3073bbb3637e19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a7b5050d119d4d1373b3073bbb3637e19">More...</a><br /></td></tr>
<tr class="separator:a7b5050d119d4d1373b3073bbb3637e19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d1db86f6b37166285cc8cc4b897949"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#ac9d1db86f6b37166285cc8cc4b897949">Initialise</a> (StructuredDataI &amp;data)</td></tr>
<tr class="separator:ac9d1db86f6b37166285cc8cc4b897949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb68bf3dc3344002238df8aba45dcab1"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#afb68bf3dc3344002238df8aba45dcab1">SetConfiguredDatabase</a> (StructuredDataI &amp;data)</td></tr>
<tr class="memdesc:afb68bf3dc3344002238df8aba45dcab1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the <em>niDeviceOperator</em> and the <em>middleBuffer</em> memory.  <a href="#afb68bf3dc3344002238df8aba45dcab1">More...</a><br /></td></tr>
<tr class="separator:afb68bf3dc3344002238df8aba45dcab1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44852da2c5b7ff4a007740b6051bd5ef"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a44852da2c5b7ff4a007740b6051bd5ef">PrepareNextState</a> (const char8 *const currentStateName, const char8 *const nextStateName)</td></tr>
<tr class="memdesc:a44852da2c5b7ff4a007740b6051bd5ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the number of packets in the host-side FIFO and launchs the internal thread.  <a href="#a44852da2c5b7ff4a007740b6051bd5ef">More...</a><br /></td></tr>
<tr class="separator:a44852da2c5b7ff4a007740b6051bd5ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77de74fbe2c77f70051070fda45c7564"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a77de74fbe2c77f70051070fda45c7564">DriverRead</a> (char8 *const bufferToFill, uint32 &amp;sizeToRead, const uint32 signalIdx)</td></tr>
<tr class="memdesc:a77de74fbe2c77f70051070fda45c7564"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires a packet from the NI-9157 device and puts it in the circular buffer.  <a href="#a77de74fbe2c77f70051070fda45c7564">More...</a><br /></td></tr>
<tr class="separator:a77de74fbe2c77f70051070fda45c7564"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a3f3692f52ea11c930e534a5640e61d1c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f3692f52ea11c930e534a5640e61d1c"></a>
uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a3f3692f52ea11c930e534a5640e61d1c">checkPacketCounter</a></td></tr>
<tr class="memdesc:a3f3692f52ea11c930e534a5640e61d1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the packet counter should be checked. <br /></td></tr>
<tr class="separator:a3f3692f52ea11c930e534a5640e61d1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b71352986a07c54cf6271379b018b1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3b71352986a07c54cf6271379b018b1f"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a3b71352986a07c54cf6271379b018b1f">fifoDev</a></td></tr>
<tr class="memdesc:a3b71352986a07c54cf6271379b018b1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The FIFO descriptor. <br /></td></tr>
<tr class="separator:a3b71352986a07c54cf6271379b018b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39cfe946ce8944632ed49b36d4b3d335"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a39cfe946ce8944632ed49b36d4b3d335"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a39cfe946ce8944632ed49b36d4b3d335">nFrameForSync</a></td></tr>
<tr class="memdesc:a39cfe946ce8944632ed49b36d4b3d335"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of packets to be used in case of lost of synchronisation. <br /></td></tr>
<tr class="separator:a39cfe946ce8944632ed49b36d4b3d335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21eb7da1f10fd580f935cdb2cd5a3233"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a21eb7da1f10fd580f935cdb2cd5a3233"></a>
uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a21eb7da1f10fd580f935cdb2cd5a3233">sampleByteSize</a></td></tr>
<tr class="memdesc:a21eb7da1f10fd580f935cdb2cd5a3233"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of a FIFO element. <br /></td></tr>
<tr class="separator:a21eb7da1f10fd580f935cdb2cd5a3233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d34f2dce5ef355466b04d3a1c358a43"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5d34f2dce5ef355466b04d3a1c358a43"></a>
ReferenceT&lt; <a class="el" href="classMARTe_1_1NI9157Device.html">NI9157Device</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a5d34f2dce5ef355466b04d3a1c358a43">niDeviceBoard</a></td></tr>
<tr class="memdesc:a5d34f2dce5ef355466b04d3a1c358a43"><td class="mdescLeft">&#160;</td><td class="mdescRight">The reference to the NI9157 device. <br /></td></tr>
<tr class="separator:a5d34f2dce5ef355466b04d3a1c358a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac666a8c23b447fffb8fd5de0b54e03"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaac666a8c23b447fffb8fd5de0b54e03"></a>
<a class="el" href="classMARTe_1_1NI9157DeviceOperatorTI.html">NI9157DeviceOperatorTI</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#aaac666a8c23b447fffb8fd5de0b54e03">niDeviceOperator</a></td></tr>
<tr class="memdesc:aaac666a8c23b447fffb8fd5de0b54e03"><td class="mdescLeft">&#160;</td><td class="mdescRight">The operator to interface with the NI-9157 device. <br /></td></tr>
<tr class="separator:aaac666a8c23b447fffb8fd5de0b54e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4e1788edb72e985a5f9755738a197a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e4e1788edb72e985a5f9755738a197a"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a7e4e1788edb72e985a5f9755738a197a">totalReadSize</a></td></tr>
<tr class="memdesc:a7e4e1788edb72e985a5f9755738a197a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The total size to be acquired per packet. <br /></td></tr>
<tr class="separator:a7e4e1788edb72e985a5f9755738a197a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afedb76934ba94be2d126c180779e10db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afedb76934ba94be2d126c180779e10db"></a>
uint8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#afedb76934ba94be2d126c180779e10db">middleBuffer</a></td></tr>
<tr class="memdesc:afedb76934ba94be2d126c180779e10db"><td class="mdescLeft">&#160;</td><td class="mdescRight">A buffer used to acquire data and for eventual re-synchronisations. <br /></td></tr>
<tr class="separator:afedb76934ba94be2d126c180779e10db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5847af7c386911329ff1f41c222f1fc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae5847af7c386911329ff1f41c222f1fc"></a>
uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#ae5847af7c386911329ff1f41c222f1fc">runNi</a></td></tr>
<tr class="memdesc:ae5847af7c386911329ff1f41c222f1fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the NI-9157 device must be started by this data source. <br /></td></tr>
<tr class="separator:ae5847af7c386911329ff1f41c222f1fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe40c462ffa3d4e424dc6017667f992b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abe40c462ffa3d4e424dc6017667f992b"></a>
uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#abe40c462ffa3d4e424dc6017667f992b">packetCounter</a></td></tr>
<tr class="memdesc:abe40c462ffa3d4e424dc6017667f992b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The packet counter. <br /></td></tr>
<tr class="separator:abe40c462ffa3d4e424dc6017667f992b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae47ec088af34ec3469d0aeef4169b49c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae47ec088af34ec3469d0aeef4169b49c"></a>
uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#ae47ec088af34ec3469d0aeef4169b49c">acquireFromCounter</a></td></tr>
<tr class="memdesc:ae47ec088af34ec3469d0aeef4169b49c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The first packet to be acquired and put in the circular buffer. <br /></td></tr>
<tr class="separator:ae47ec088af34ec3469d0aeef4169b49c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96b3d9e2227c0b273348abaea1351b08"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96b3d9e2227c0b273348abaea1351b08"></a>
uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a96b3d9e2227c0b273348abaea1351b08">nextPacketCheck</a></td></tr>
<tr class="memdesc:a96b3d9e2227c0b273348abaea1351b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">The next packet counter to be checked. <br /></td></tr>
<tr class="separator:a96b3d9e2227c0b273348abaea1351b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee719732da9e03a42b2718a93a4e0f7b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee719732da9e03a42b2718a93a4e0f7b"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#aee719732da9e03a42b2718a93a4e0f7b">checkCounterAfterNSteps</a></td></tr>
<tr class="memdesc:aee719732da9e03a42b2718a93a4e0f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The difference between two consecutive checked counter. <br /></td></tr>
<tr class="separator:aee719732da9e03a42b2718a93a4e0f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b43dccef105f2df1e8449b9ab52516"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a79b43dccef105f2df1e8449b9ab52516"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#a79b43dccef105f2df1e8449b9ab52516">counterStep</a></td></tr>
<tr class="memdesc:a79b43dccef105f2df1e8449b9ab52516"><td class="mdescLeft">&#160;</td><td class="mdescRight">The difference between two consecutive acquired counter. <br /></td></tr>
<tr class="separator:a79b43dccef105f2df1e8449b9ab52516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac70b6e14bab49b776eb2c108e358fbc8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac70b6e14bab49b776eb2c108e358fbc8"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#ac70b6e14bab49b776eb2c108e358fbc8">numberOfPacketsInFIFO</a></td></tr>
<tr class="memdesc:ac70b6e14bab49b776eb2c108e358fbc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of packets in the host-side FIFO. <br /></td></tr>
<tr class="separator:ac70b6e14bab49b776eb2c108e358fbc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad364364537a6dcce4702cc1c5263700b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad364364537a6dcce4702cc1c5263700b"></a>
StreamString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html#ad364364537a6dcce4702cc1c5263700b">fifoName</a></td></tr>
<tr class="memdesc:ad364364537a6dcce4702cc1c5263700b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the fifo to be used in the MXI interface. <br /></td></tr>
<tr class="separator:ad364364537a6dcce4702cc1c5263700b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Circular buffer acquisition from NI-9157 FIFO. </p>
<p>This data source can hold only one signal (over the special InternalTimeStamp and ErrorCheck signals). Depending on the signal type, a NI9157DeviceOperator object is created to manage the typed read operation from the NI-9157 FIFO. The name of the variable that identifies the FIFO must be defined by the user in the configuration file.</p>
<p>An internal thread is started in the PrepareNextState method and the object starts acquiring from the FIFO and putting the received packets in a circular buffer (see CircularBufferThreadInputDataSource). The Synchronise method, allow the Brokers to get the address of the last written packet in the FIFO.</p>
<p>If the signal vector parameter PacketMemberSizes is specified, a interleaved to flat operation (see InterleavedXFlat) is performed before putting the packet in the circular buffer.</p>
<p>Follows a configuration example: </p><pre>
+Drv1 = {
    Class = <a class="el" href="classMARTe_1_1NI9157CircularFifoReader.html" title="Circular buffer acquisition from NI-9157 FIFO. ">NI9157CircularFifoReader</a>
    NumberOfBuffers = 80  //see CircularBufferThreadInputDataSource
    CpuMask = 2 //see CircularBufferThreadInputDataSource
    sleepInMutexSec = 1e-9 //see CircularBufferThreadInputDataSource
    NI9157DevicePath = NiDevice //the absolute path of the <a class="el" href="classMARTe_1_1NI9157Device.html" title="Wraps the NiFpga.h API to interface with the NI-9157 Compact-RIO chassis. ">NI9157Device</a> block in the configuration database
    CheckPacketCounter = 1 //if the first element is the packet counter (default 0)
    NumberOfPacketsInFIFO = 20 //the number of packets in the host-side FIFO (default 10)
    FifoName = "NiFpga_TestGTD0001_TargetToHostFifoU64_FIFO" //the name of the FIFO variable
    NumOfFrameForSync = 2 //the number of packets to be used if the synchronisation is lost with the device (checking the packet counter). Default 2.
    RunNi = 1 //if the <a class="el" href="classMARTe_1_1NI9157Device.html" title="Wraps the NiFpga.h API to interface with the NI-9157 Compact-RIO chassis. ">NI9157Device</a> has to be started by this data source
    CounterStep = 2000 //the gap between two consecutive packet counters (default 1)
    CheckCounterAfterNSteps = 2000 //when the counter must be checked. It must be multiple of CounterStep (default is equal to CounterStep).
    FirstPacketCounter = 1 //the first packet counter that should be acquired from the device.
    AcquireFromCounter = 1 //The first packet counter to be acquired. The data source wait this packet before starting to put packets in the circular buffer (default equal to FirstPacketCounter).
    +Signals = {
       Signal1 = {
          Type = uint32
          NumberOfElements = 500
          PacketMemberSizes = {4, 4, 4, 4}"
    }
}
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9aa29c8b3fc12b5e40b495a4f2f5046b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MARTe::NI9157CircularFifoReader::NI9157CircularFifoReader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="section post"><dt>Postcondition</dt><dd>checkPacketCounter = 0u;<br />
 nFrameForSync = 0u;<br />
 sampleByteSize = 0u;<br />
 niDeviceOperator = NULL_PTR(NI9157DeviceOperatorTI *);<br />
 fifoDev = 0u;<br />
 totalReadSize = 0u;<br />
 middleBuffer = NULL_PTR(uint8 *);<br />
 runNi = 0u;<br />
 packetCounter = 1u;<br />
 acquireFromCounter = 0u;<br />
 nextPacketCheck = 1u;<br />
 checkCounterAfterNSteps = 0u;<br />
 counterStep = 1u;<br />
 numberOfPacketsInFIFO = 10u;<br />
</dd></dl>

</div>
</div>
<a class="anchor" id="a7b5050d119d4d1373b3073bbb3637e19"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MARTe::NI9157CircularFifoReader::~NI9157CircularFifoReader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<p>Frees the <em>niDeviceOperator</em> pointer and the <em>middleBuffer</em> memory. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a77de74fbe2c77f70051070fda45c7564"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::NI9157CircularFifoReader::DriverRead </td>
          <td>(</td>
          <td class="paramtype">char8 *const&#160;</td>
          <td class="paramname"><em>bufferToFill</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 &amp;&#160;</td>
          <td class="paramname"><em>sizeToRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>signalIdx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquires a packet from the NI-9157 device and puts it in the circular buffer. </p>
<dl class="section see"><dt>See also</dt><dd>CircularBufferThreadInputDataSource::DriverRead</dd></dl>
<p>If CheckPacketCounter==1, the method checks is the first element of the packet is coherent. In particular:</p><ul>
<li>the counter of the N-th packet should be (FirstPacketCounter+N*CounterStep).<br />
</li>
<li>the counter is checked after (CheckCounterAfterNSteps/CounterStep)s acquisitions.<br />
If the packet counter does not respect these rules than <em>NumOfFrameForSync</em> packets are acquired in <em>middleBuffer</em> and the method searches for consecutive packet numbers in these packets. If succeeds, the FIFO data is shifted in order to be synchronised again on the packet counter as first element.</li>
</ul>
<p>If the vector parameter PacketMemberSizes is present within the configuration of the signal in the data source block, then the method MemoryOperationsHelper::InterleavedToFlat is called in order to de-interleave data before putting it in the circular buffer. </p>

</div>
</div>
<a class="anchor" id="ac9d1db86f6b37166285cc8cc4b897949"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::NI9157CircularFifoReader::Initialise </td>
          <td>(</td>
          <td class="paramtype">StructuredDataI &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd>CircularBufferThreadInputDataSource::Initialise</dd></dl>
<p>Follows a list of the parameters: NI9157DevicePath: the absolute path of the <a class="el" href="classMARTe_1_1NI9157Device.html" title="Wraps the NiFpga.h API to interface with the NI-9157 Compact-RIO chassis. ">NI9157Device</a> block in the configuration database<br />
 NumberOfPacketsInFIFO: the number of packets in the host-side FIFO (default 10)<br />
 FifoName: the name of the FIFO variable that can be found in the exported Labview header file.<br />
 RunNi: if the <a class="el" href="classMARTe_1_1NI9157Device.html" title="Wraps the NiFpga.h API to interface with the NI-9157 Compact-RIO chassis. ">NI9157Device</a> has to be started by this data source<br />
 CheckPacketCounter: if the first element is the packet counter (default 0)<br />
 if (CheckPacketCounter == 1) then the following parameters mean:<br />
 NumOfFrameForSync: the number of packets to be used if the synchronisation is lost with the device (checking the packet counter). Default 2.<br />
 CounterStep: the difference between two consecutive packet counters (default 1)<br />
 CheckCounterAfterNSteps: when the counter must be checked. It must be multiple of CounterStep (by default is equal to CounterStep).<br />
 FirstPacketCounter: the first packet counter that should be acquired from the device.<br />
 AcquireFromCounter&gt; the first packet counter to be acquired. The data source wait this packet before starting to put packets in the circular buffer<br />
 (by default is equal to FirstPacketCounter). </p>

</div>
</div>
<a class="anchor" id="a44852da2c5b7ff4a007740b6051bd5ef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::NI9157CircularFifoReader::PrepareNextState </td>
          <td>(</td>
          <td class="paramtype">const char8 *const&#160;</td>
          <td class="paramname"><em>currentStateName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char8 *const&#160;</td>
          <td class="paramname"><em>nextStateName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configures the number of packets in the host-side FIFO and launchs the internal thread. </p>
<dl class="section see"><dt>See also</dt><dd>CircularBufferThreadInputDataSource::PrepareNextState </dd></dl>

</div>
</div>
<a class="anchor" id="afb68bf3dc3344002238df8aba45dcab1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::NI9157CircularFifoReader::SetConfiguredDatabase </td>
          <td>(</td>
          <td class="paramtype">StructuredDataI &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the <em>niDeviceOperator</em> and the <em>middleBuffer</em> memory. </p>
<dl class="section see"><dt>See also</dt><dd>CircularBufferThreadInputDataSource::SetConfiguredDatabase </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>false if the type of the signal is unsupported (not an integer or boolean type) causing the failure of the <em>niDeviceOperator</em> creation. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/pc/MARTe2Project/GIT/MARTe2-components/Source/Components/DataSources/NI9157/<a class="el" href="NI9157CircularFifoReader_8h_source.html">NI9157CircularFifoReader.h</a></li>
<li>/home/pc/MARTe2Project/GIT/MARTe2-components/Source/Components/DataSources/NI9157/<a class="el" href="NI9157CircularFifoReader_8cpp.html">NI9157CircularFifoReader.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
