<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MARTe2-components: MARTe::TriggerOnChangeGAM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MARTe2-components
   </div>
   <div id="projectbrief">C++ real-time application development framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>MARTe</b></li><li class="navelem"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html">TriggerOnChangeGAM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="classMARTe_1_1TriggerOnChangeGAM-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MARTe::TriggerOnChangeGAM Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Triggers MARTe::Message events on the basis of commands received in the input signals.  
 <a href="classMARTe_1_1TriggerOnChangeGAM.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="TriggerOnChangeGAM_8h_source.html">TriggerOnChangeGAM.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MARTe::TriggerOnChangeGAM:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMARTe_1_1TriggerOnChangeGAM.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2b2a5eb4d99a4baf25a1493bdfbab7aa"><td class="memItemLeft" align="right" valign="top"><a id="a2b2a5eb4d99a4baf25a1493bdfbab7aa"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a2b2a5eb4d99a4baf25a1493bdfbab7aa">TriggerOnChangeGAM</a> ()</td></tr>
<tr class="memdesc:a2b2a5eb4d99a4baf25a1493bdfbab7aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:a2b2a5eb4d99a4baf25a1493bdfbab7aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb3bbf73fe2f8f273d1598630ae4ab6"><td class="memItemLeft" align="right" valign="top"><a id="a4cb3bbf73fe2f8f273d1598630ae4ab6"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a4cb3bbf73fe2f8f273d1598630ae4ab6">~TriggerOnChangeGAM</a> ()</td></tr>
<tr class="memdesc:a4cb3bbf73fe2f8f273d1598630ae4ab6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a4cb3bbf73fe2f8f273d1598630ae4ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79edfc5251477835b1a6e87463f0fbea"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a79edfc5251477835b1a6e87463f0fbea">Setup</a> ()</td></tr>
<tr class="memdesc:a79edfc5251477835b1a6e87463f0fbea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the GAM environment.  <a href="classMARTe_1_1TriggerOnChangeGAM.html#a79edfc5251477835b1a6e87463f0fbea">More...</a><br /></td></tr>
<tr class="separator:a79edfc5251477835b1a6e87463f0fbea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68c4dcdf422e41a2aee38b8b865c2e52"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a68c4dcdf422e41a2aee38b8b865c2e52">Execute</a> ()</td></tr>
<tr class="memdesc:a68c4dcdf422e41a2aee38b8b865c2e52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes an internal state machine that allows to trigger events by checking a rising edge of the commands (i.e.  <a href="classMARTe_1_1TriggerOnChangeGAM.html#a68c4dcdf422e41a2aee38b8b865c2e52">More...</a><br /></td></tr>
<tr class="separator:a68c4dcdf422e41a2aee38b8b865c2e52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a602c599055a6af45685f86c8760b510a"><td class="memItemLeft" align="right" valign="top">int32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a602c599055a6af45685f86c8760b510a">IsChanged</a> (const uint32 cIdx) const</td></tr>
<tr class="memdesc:a602c599055a6af45685f86c8760b510a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the command with index <em>cIdx</em> has changed.  <a href="classMARTe_1_1TriggerOnChangeGAM.html#a602c599055a6af45685f86c8760b510a">More...</a><br /></td></tr>
<tr class="separator:a602c599055a6af45685f86c8760b510a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120fa011af3ec5a16ce93fe1f2e1f385"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a120fa011af3ec5a16ce93fe1f2e1f385">SetAck</a> (const uint32 cIdx)</td></tr>
<tr class="memdesc:a120fa011af3ec5a16ce93fe1f2e1f385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the output memory relative to the input command (acknowledgment) equal to the input command value received.  <a href="classMARTe_1_1TriggerOnChangeGAM.html#a120fa011af3ec5a16ce93fe1f2e1f385">More...</a><br /></td></tr>
<tr class="separator:a120fa011af3ec5a16ce93fe1f2e1f385"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:abe844792e32c8d1883469cf687707f91"><td class="memItemLeft" align="right" valign="top"><a id="abe844792e32c8d1883469cf687707f91"></a>
uint8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#abe844792e32c8d1883469cf687707f91">previousValue</a></td></tr>
<tr class="memdesc:abe844792e32c8d1883469cf687707f91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last input memory value. <br /></td></tr>
<tr class="separator:abe844792e32c8d1883469cf687707f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7368f7f6b9e28660a36aefa479b919c3"><td class="memItemLeft" align="right" valign="top"><a id="a7368f7f6b9e28660a36aefa479b919c3"></a>
uint32 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a7368f7f6b9e28660a36aefa479b919c3">state</a></td></tr>
<tr class="memdesc:a7368f7f6b9e28660a36aefa479b919c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the state of the internal state machine for each command. <br /></td></tr>
<tr class="separator:a7368f7f6b9e28660a36aefa479b919c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e0dd88fe7a6af613f9df8b4534a9215"><td class="memItemLeft" align="right" valign="top"><a id="a1e0dd88fe7a6af613f9df8b4534a9215"></a>
<a class="el" href="structMARTe_1_1PacketField.html">PacketField</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a1e0dd88fe7a6af613f9df8b4534a9215">packetConfig</a></td></tr>
<tr class="memdesc:a1e0dd88fe7a6af613f9df8b4534a9215"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to store the property of the input signals, namely the name, the offset, the type and if it is a command or not. <br /></td></tr>
<tr class="separator:a1e0dd88fe7a6af613f9df8b4534a9215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50955ff912983dc978fe0c50675a7c9d"><td class="memItemLeft" align="right" valign="top"><a id="a50955ff912983dc978fe0c50675a7c9d"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a50955ff912983dc978fe0c50675a7c9d">numberOfFields</a></td></tr>
<tr class="memdesc:a50955ff912983dc978fe0c50675a7c9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of fields that is equal to the number of input signals if all input signals have NumberOfElements==1, otherwise is the sum of the NumberOfElements of each input signals. <br /></td></tr>
<tr class="separator:a50955ff912983dc978fe0c50675a7c9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad69be7272c8e0d3d8d19f776ed43443e"><td class="memItemLeft" align="right" valign="top"><a id="ad69be7272c8e0d3d8d19f776ed43443e"></a>
ReferenceT&lt; ReferenceContainer &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#ad69be7272c8e0d3d8d19f776ed43443e">events</a></td></tr>
<tr class="memdesc:ad69be7272c8e0d3d8d19f776ed43443e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The container of the EventConditionTriggerObjects. <br /></td></tr>
<tr class="separator:ad69be7272c8e0d3d8d19f776ed43443e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd94a384a3b9cff542d41a177342366"><td class="memItemLeft" align="right" valign="top"><a id="a0fd94a384a3b9cff542d41a177342366"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a0fd94a384a3b9cff542d41a177342366">numberOfEvents</a></td></tr>
<tr class="memdesc:a0fd94a384a3b9cff542d41a177342366"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of events (equal to the size of <em>events</em>) <br /></td></tr>
<tr class="separator:a0fd94a384a3b9cff542d41a177342366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ac44c054c5e548286f6a2ee71741d13"><td class="memItemLeft" align="right" valign="top"><a id="a9ac44c054c5e548286f6a2ee71741d13"></a>
uint32 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a9ac44c054c5e548286f6a2ee71741d13">commandIndex</a></td></tr>
<tr class="memdesc:a9ac44c054c5e548286f6a2ee71741d13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the command indices within the <em>packetConfig</em> array. <br /></td></tr>
<tr class="separator:a9ac44c054c5e548286f6a2ee71741d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba2f250757832c186a72d50c4ac98039"><td class="memItemLeft" align="right" valign="top"><a id="aba2f250757832c186a72d50c4ac98039"></a>
uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#aba2f250757832c186a72d50c4ac98039">numberOfCommands</a></td></tr>
<tr class="memdesc:aba2f250757832c186a72d50c4ac98039"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of commands. <br /></td></tr>
<tr class="separator:aba2f250757832c186a72d50c4ac98039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64570ab23a0c86a06dea50f7bd573b89"><td class="memItemLeft" align="right" valign="top"><a id="a64570ab23a0c86a06dea50f7bd573b89"></a>
uint32 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a64570ab23a0c86a06dea50f7bd573b89">cntReplied</a></td></tr>
<tr class="memdesc:a64570ab23a0c86a06dea50f7bd573b89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counts the number of replied events for each command. <br /></td></tr>
<tr class="separator:a64570ab23a0c86a06dea50f7bd573b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5596a6876696bbb45a636a916a5bff"><td class="memItemLeft" align="right" valign="top"><a id="ace5596a6876696bbb45a636a916a5bff"></a>
uint32 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#ace5596a6876696bbb45a636a916a5bff">cntTrigger</a></td></tr>
<tr class="memdesc:ace5596a6876696bbb45a636a916a5bff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counts the number of events triggered for each command. <br /></td></tr>
<tr class="separator:ace5596a6876696bbb45a636a916a5bff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a327705ae460a3413aeb603ba1a4f5b2e"><td class="memItemLeft" align="right" valign="top"><a id="a327705ae460a3413aeb603ba1a4f5b2e"></a>
uint8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a327705ae460a3413aeb603ba1a4f5b2e">currentValue</a></td></tr>
<tr class="memdesc:a327705ae460a3413aeb603ba1a4f5b2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the current input memory. <br /></td></tr>
<tr class="separator:a327705ae460a3413aeb603ba1a4f5b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1e2bb8c9e7ec8ab6d488f463b09fa9f"><td class="memItemLeft" align="right" valign="top"><a id="ae1e2bb8c9e7ec8ab6d488f463b09fa9f"></a>
uint8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#ae1e2bb8c9e7ec8ab6d488f463b09fa9f">ackValue</a></td></tr>
<tr class="memdesc:ae1e2bb8c9e7ec8ab6d488f463b09fa9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the current output memory. <br /></td></tr>
<tr class="separator:ae1e2bb8c9e7ec8ab6d488f463b09fa9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a585c881b98ee3531af38ca9a8d85af7a"><td class="memItemLeft" align="right" valign="top"><a id="a585c881b98ee3531af38ca9a8d85af7a"></a>
static const uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a585c881b98ee3531af38ca9a8d85af7a">READY</a> =0u</td></tr>
<tr class="memdesc:a585c881b98ee3531af38ca9a8d85af7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">READY state. <br /></td></tr>
<tr class="separator:a585c881b98ee3531af38ca9a8d85af7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05abfa8edfe20adb578d9341b803fe95"><td class="memItemLeft" align="right" valign="top"><a id="a05abfa8edfe20adb578d9341b803fe95"></a>
static const uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a05abfa8edfe20adb578d9341b803fe95">SENDING</a> =1u</td></tr>
<tr class="memdesc:a05abfa8edfe20adb578d9341b803fe95"><td class="mdescLeft">&#160;</td><td class="mdescRight">SENDING state. <br /></td></tr>
<tr class="separator:a05abfa8edfe20adb578d9341b803fe95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cbc6362d1d2f457e02aaaf31e1a2941"><td class="memItemLeft" align="right" valign="top"><a id="a1cbc6362d1d2f457e02aaaf31e1a2941"></a>
static const uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a1cbc6362d1d2f457e02aaaf31e1a2941">DONE</a> =2u</td></tr>
<tr class="memdesc:a1cbc6362d1d2f457e02aaaf31e1a2941"><td class="mdescLeft">&#160;</td><td class="mdescRight">DONE state. <br /></td></tr>
<tr class="separator:a1cbc6362d1d2f457e02aaaf31e1a2941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a480af6dda2fa2164827965aa82f6f61b"><td class="memItemLeft" align="right" valign="top"><a id="a480af6dda2fa2164827965aa82f6f61b"></a>
static const uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html#a480af6dda2fa2164827965aa82f6f61b">ERROR</a> =3u</td></tr>
<tr class="memdesc:a480af6dda2fa2164827965aa82f6f61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">ERROR state. <br /></td></tr>
<tr class="separator:a480af6dda2fa2164827965aa82f6f61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Triggers MARTe::Message events on the basis of commands received in the input signals. </p>
<p>This GAM must have the output memory size equal to the input memory size except for the last output memory area that must contain the state of the internal state machine for each command and, therefore, have a size of [NumberOfCommands*sizeof(uint32)].</p>
<p>This GAM must contain a ReferenceContainer called "Events" containing <a class="el" href="classMARTe_1_1EventConditionTrigger.html" title="Checks if the memory in input to the Check() function contains a combination of values specified by t...">EventConditionTrigger</a> objects (see <a class="el" href="classMARTe_1_1EventConditionTrigger.html" title="Checks if the memory in input to the Check() function contains a combination of values specified by t...">EventConditionTrigger</a>). The <a class="el" href="classMARTe_1_1EventConditionTrigger.html" title="Checks if the memory in input to the Check() function contains a combination of values specified by t...">EventConditionTrigger</a> objects can be configured to send messages based on a combination of specific values of the GAM input signals.</p>
<p>The input signals can be variables or commands. A command must be declared with a name that begins with the prefix "Command". During the execution of the GAM, the signal values belonging to normal variables will be trivially copied from input to output. The input signal values belonging to commands will be read and checked to eventually trigger specific configured events, and the command output will be written by following a specific protocol (described below).</p>
<p>This GAM implements the following communication protocol:<br  />
 1) A list of commands and variables is received. The output memory corresponding to the commands is set to zero (STATE == READY-0 ).<br  />
 2) For each command do:<br  />
 3) If the command changes from zero to a value, depending on the combination with the values<br  />
 of other commands and variables, one or more events will be triggered (see <a class="el" href="classMARTe_1_1EventConditionTrigger.html" title="Checks if the memory in input to the Check() function contains a combination of values specified by t...">EventConditionTrigger</a>) (STATE == SENDING-1)<br  />
 4) Once all the events have been triggered, the command is marked as "acknowledged" and its value is written in the output.<br  />
 5) Wait that the command in input returns equal to zero, then "acknowledge the acknowledged" by writing zero in the output corresponding to that command (STATE == DONE-2).<br  />
 6) Wait again for a command value change that will trigger new events (STATE == READY-0).</p>
<p>The internal state machine will go in error state (STATE == ERROR-3) if:<br  />
 1) (STATE == SENDING) and the input command becomes zero or changes its value.<br  />
 2) (STATE == DONE) and the input command changes its value to something other than zero.<br  />
If (STATE == ERROR) a falling edge on the input command value (i.e. the input command must go from a non zero-value to a zero value) will bring the state to READY again. <br  />
As a consequence, if the (STATE == ERROR) and the command was already zero, to reset, the command must go to a non-zero value for the duration of at least one cycle.</p>
<p>Follows an example of configuration: </p><pre>
  +GAM1 = {
      Class = <a class="el" href="classMARTe_1_1TriggerOnChangeGAM.html" title="Triggers MARTe::Message events on the basis of commands received in the input signals.">TriggerOnChangeGAM</a>
      +Events = {
          Class = ReferenceContainer
          +Event1 = {
              Class = <a class="el" href="classMARTe_1_1EventConditionTrigger.html" title="Checks if the memory in input to the Check() function contains a combination of values specified by t...">EventConditionTrigger</a>
              EventTrigger = {
                  Command1 = 1
                  Signal1 = 2 //Command == 1 and Signal1 == 2 must be true to trigger the condition.
              }
              +Message1 = {
                  Class = Message
                  Destination = Application.Data.Input
                  Function = "TrigFun1"
                  Mode = ExpectsReply
              }
          }
          +Event2 = {
              Class = <a class="el" href="classMARTe_1_1EventConditionTrigger.html" title="Checks if the memory in input to the Check() function contains a combination of values specified by t...">EventConditionTrigger</a>
              EventTrigger = {
                 Command1 = 2
              }
              +Message2 = {
                 Class = Message
                 Destination = Application.Data.Input
                 Function = "TrigFun2"
                 Mode = ExpectsReply
              }
          }
          +Event3 = {
              Class = <a class="el" href="classMARTe_1_1EventConditionTrigger.html" title="Checks if the memory in input to the Check() function contains a combination of values specified by t...">EventConditionTrigger</a>
              EventTrigger = {
                  Command1 = 3
              }
              +Message3 = {
                  Class = Message
                  Destination = Application.Data.Input
                  Function = "TrigFun3"
                  Mode = ExpectsReply
              }
          }
      }
      InputSignals = {
           Command1 = {
               DataSource = Input
               Frequency = 1
               Type = uint32
           }
           Command2 = {
               DataSource = Input
               Type = uint32
           }
           Signal1 = {
               DataSource = Input
               Type = uint32
           }
      }
      OutputSignals = {
          CommandsAck = {
              DataSource = DDB1
              Type = uint32
              NumberOfDimensions = 1
              NumberOfElements = 2 //2 input commands
              Trigger = 1
          }
          Signal1 = {
               DataSource = DDB1
               Type = uint32
          }
          State = {
              DataSource = DDB1
              Type = uint32
              NumberOfDimensions = 1
              NumberOfElements = 2 //2 commands
              Trigger = 1
           }
      }
  }
</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a68c4dcdf422e41a2aee38b8b865c2e52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68c4dcdf422e41a2aee38b8b865c2e52">&#9670;&nbsp;</a></span>Execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::TriggerOnChangeGAM::Execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes an internal state machine that allows to trigger events by checking a rising edge of the commands (i.e. </p>
<p>from zero to a non-zero value) and send acknowledgments of the commands themselves.  For each command the following state machine is implemented.<br  />
</p><ul>
<li>Start in state=READY(0). The command value in input must be zero during this state. If a rising edge is detected, the state machine goes in SENDING(1) state.<br  />
</li>
<li>When the state machine is in state=SENDING(1), the contained EventTriggerCondition objects are queried to check if one or more events should be executed on the base of the combination of commands and variables defined in the configuration. Once all the events receive their replies, the value of the command is copied in output (that until now was kept to zero) acknowledging that the events have been executed.<br  />
 Then, the state machine can go in DONE(2) state. If the command change its values during this state, the state machine goes in ERROR(3) state.<br  />
</li>
<li>When the state machine is in state=DONE(2), it waits that the command in input is reset to zero (falling edge) and set again the acknowledgment. of the command to zero. Then the state machine can return to READY(0) state, to start again a new cycle. If the command change its values to something different than zero during this state, the state machine goes in ERROR(3) state.<br  />
</li>
<li>When the state machine is in state=ERROR(3), the detection of a falling edge of the command (namely a change from a value to zero) will cause the sate machine returning in READY(0) state. <dl class="section return"><dt>Returns</dt><dd>true. </dd></dl>
</li>
</ul>

</div>
</div>
<a id="a602c599055a6af45685f86c8760b510a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a602c599055a6af45685f86c8760b510a">&#9670;&nbsp;</a></span>IsChanged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32 MARTe::TriggerOnChangeGAM::IsChanged </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>cIdx</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the command with index <em>cIdx</em> has changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cIdx</td><td>is the command index. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-2 if the command has changed from (value1!=0) to (value2!=0), 0 if the command has not changed, -1 if the command has changed from (value1!=0) to (value2==0), 1 if the command has changed from (value1==0) to (value2!=0). </dd></dl>

</div>
</div>
<a id="a120fa011af3ec5a16ce93fe1f2e1f385"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a120fa011af3ec5a16ce93fe1f2e1f385">&#9670;&nbsp;</a></span>SetAck()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MARTe::TriggerOnChangeGAM::SetAck </td>
          <td>(</td>
          <td class="paramtype">const uint32&#160;</td>
          <td class="paramname"><em>cIdx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the output memory relative to the input command (acknowledgment) equal to the input command value received. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cIdx</td><td>is the command index. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a79edfc5251477835b1a6e87463f0fbea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79edfc5251477835b1a6e87463f0fbea">&#9670;&nbsp;</a></span>Setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::TriggerOnChangeGAM::Setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialises the GAM environment. </p>
<p>Separates the input signals in commands and variables and checks that OutputSize=InputSize+(NumberOfCommands*sizeof(uint32)). The commands are recognised among the signal names that begins with the prefix "Command". </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/codac-dev/MARTe2Project/GIT/MARTe2-components/Source/Components/GAMs/TriggerOnChangeGAM/<a class="el" href="TriggerOnChangeGAM_8h_source.html">TriggerOnChangeGAM.h</a></li>
<li>/home/codac-dev/MARTe2Project/GIT/MARTe2-components/Source/Components/GAMs/TriggerOnChangeGAM/<a class="el" href="TriggerOnChangeGAM_8cpp.html">TriggerOnChangeGAM.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
