<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MARTe2-components: MARTe::MathExpressionGAM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MARTe2-components
   </div>
   <div id="projectbrief">C++ real-time application development framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>MARTe</b></li><li class="navelem"><a class="el" href="classMARTe_1_1MathExpressionGAM.html">MathExpressionGAM</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classMARTe_1_1MathExpressionGAM-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MARTe::MathExpressionGAM Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A GAM that wraps the C++ exprtk library for run-time expression evaluation.  
 <a href="classMARTe_1_1MathExpressionGAM.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="MathExpressionGAM_8h_source.html">MathExpressionGAM.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MARTe::MathExpressionGAM:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMARTe_1_1MathExpressionGAM.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6ee1288ef2c3012b0d87bfa60fc24381"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1MathExpressionGAM.html#a6ee1288ef2c3012b0d87bfa60fc24381">Initialise</a> (StructuredDataI &amp;data)</td></tr>
<tr class="memdesc:a6ee1288ef2c3012b0d87bfa60fc24381"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes and retrieves informations from configuration file.  <a href="classMARTe_1_1MathExpressionGAM.html#a6ee1288ef2c3012b0d87bfa60fc24381">More...</a><br /></td></tr>
<tr class="separator:a6ee1288ef2c3012b0d87bfa60fc24381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a604f9b3be9d22d8affd44a8db6cd785d"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1MathExpressionGAM.html#a604f9b3be9d22d8affd44a8db6cd785d">Setup</a> ()</td></tr>
<tr class="memdesc:a604f9b3be9d22d8affd44a8db6cd785d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks parameters and compile exprtk expressions.  <a href="classMARTe_1_1MathExpressionGAM.html#a604f9b3be9d22d8affd44a8db6cd785d">More...</a><br /></td></tr>
<tr class="separator:a604f9b3be9d22d8affd44a8db6cd785d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9bf21de85acd5e736ac7f0d62defa50"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMARTe_1_1MathExpressionGAM.html#ad9bf21de85acd5e736ac7f0d62defa50">Execute</a> ()</td></tr>
<tr class="memdesc:ad9bf21de85acd5e736ac7f0d62defa50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluates expressions from configuration file and outputs them.  <a href="classMARTe_1_1MathExpressionGAM.html#ad9bf21de85acd5e736ac7f0d62defa50">More...</a><br /></td></tr>
<tr class="separator:ad9bf21de85acd5e736ac7f0d62defa50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A GAM that wraps the C++ exprtk library for run-time expression evaluation. </p>
<p>This GAM combines the provided input signals into an arbitrary number of output signals in the way specified by the Expression leaf of each output signal.</p>
<p>The Expression leaf must be a string containing the expression that will be evaluated during run-time in string format. For details on how to write a valid expression see the exprtk library documentation. The "Expression" leaf is compulsory. Also note that the assignment operator is :=, while equal sign is used for equality checks. For details on expression syntax check exprtk documentation. Multi-line expression are supported (and often required, such as when vector handling must be performed). See example below or exprtk documentation for details.</p>
<p>The GAM supports scalar and vector signals. Matrices are not supported. When operations between vectors are carried out, result has the size of the smallest vector. To perform operations between vector of different sizes consider using a for-loop (see example below).</p>
<p>For the sake of simplicity, each signal is typecasted to float64 before being passed to the library, and typecasted back to its native type when copied in the GAM output memory.</p>
<p>The configuration syntax is (names and expression are only given as an example):</p>
<pre>
+ExprGAM = {
    Class = <a class="el" href="classMARTe_1_1MathExpressionGAM.html" title="A GAM that wraps the C++ exprtk library for run-time expression evaluation.">MathExpressionGAM</a>
    InputSignals = {               // As many as required.
        In1 = {
            Type = float64
            NumberOfElements = 1
        }
        In2 = {
            Type = int32
            NumberOfElements = 2
        }
    }
    OutputSignals = {                                // As many as required.
        Out1 = {                                     // Name can be changed.
            Expression = "Out1 := In1 + In2[0];"     // This must be one and only one string.
            Type = float32
        }
        Out2 = {
            Expression = "                                  // Multi-line expression
                          for (var i := 0; i &lt; 2; i += 1)   // Vectors must be dealt with for-loops.
                          {
                              Out2[i] := In1 * In2[i];
                          }
                         "
            Type = float64
        }
    }
}
</pre><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Add support for constants specified in configuration file. </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad9bf21de85acd5e736ac7f0d62defa50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9bf21de85acd5e736ac7f0d62defa50">&#9670;&nbsp;</a></span>Execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::MathExpressionGAM::Execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluates expressions from configuration file and outputs them. </p>
<p>During ecxecution, expressions for each output signal are evaluated with data from input signals and results are copied in output memory. </p><dl class="section return"><dt>Returns</dt><dd>true </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classMARTe_1_1MathExpressionGAM.html#a6ee1288ef2c3012b0d87bfa60fc24381" title="Initializes and retrieves informations from configuration file.">Initialise()</a> &amp;&amp; <a class="el" href="classMARTe_1_1MathExpressionGAM.html#a604f9b3be9d22d8affd44a8db6cd785d" title="Checks parameters and compile exprtk expressions.">Setup()</a> </dd></dl>
<p>GAM memory is copied in local memory as a vector of float64.</p>
<p>The expression is then evaluated and its value is printed.</p>
<p>Finally, result of the evaluation is copied to GAM memory after being recasted to its original type.</p>

</div>
</div>
<a id="a6ee1288ef2c3012b0d87bfa60fc24381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ee1288ef2c3012b0d87bfa60fc24381">&#9670;&nbsp;</a></span>Initialise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::MathExpressionGAM::Initialise </td>
          <td>(</td>
          <td class="paramtype">StructuredDataI &amp;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes and retrieves informations from configuration file. </p>
<p>During the initialization phase number of inputs and outputs are read from the configuration file and expression are stored. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>the GAM configuration specified in the configuration file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on succeed. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>Each output signal must have an "Expression" parameter. </dd></dl>
<p>Firstly, number of inputs and outputs is read from the configuration file.</p>
<p>Then expression of each output signal is read and stored.</p>

</div>
</div>
<a id="a604f9b3be9d22d8affd44a8db6cd785d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a604f9b3be9d22d8affd44a8db6cd785d">&#9670;&nbsp;</a></span>Setup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MARTe::MathExpressionGAM::Setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks parameters and compile exprtk expressions. </p>
<p>This method:</p><ol type="1">
<li>checks if types and dimensions retrieved from the configuration file are correct,</li>
<li>allocates a local float64 recast of GAM memory,</li>
<li>uses exprtk library to parse and compile expressions.</li>
</ol>
<p>Expressions are compiled here since one of strenghts of exprtk is that expressions do not need to be recompiled each time they are evaluated, even if variables in the expression change their value. </p><dl class="section return"><dt>Returns</dt><dd>true on succeed. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classMARTe_1_1MathExpressionGAM.html#a6ee1288ef2c3012b0d87bfa60fc24381" title="Initializes and retrieves informations from configuration file.">Initialise()</a>. </dd></dl>
<p>Firstly, types and dimensions of signals are retrieved and checked.</p>
<p>Then a local memory is allocated that will contain float64 versions of input and output signals.</p>
<p>Finally exprtk is invoked.</p>
<ol type="1">
<li>The list of all variables concurring to form this output is retrieved.</li>
<li>Variables are added to the symbol table. However, since exprtk can manage up to vectors, all variables are treated as vectors for the sake of simplicity.</li>
<li>The symbol table is passed to each expression and compiled.</li>
</ol>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/codac-dev/MARTe2Project/GIT/MARTe2-components/Source/Components/GAMs/MathExpressionGAM/<a class="el" href="MathExpressionGAM_8h_source.html">MathExpressionGAM.h</a></li>
<li>/home/codac-dev/MARTe2Project/GIT/MARTe2-components/Source/Components/GAMs/MathExpressionGAM/<a class="el" href="MathExpressionGAM_8cpp.html">MathExpressionGAM.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.0
</small></address>
</body>
</html>
